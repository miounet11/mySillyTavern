# ğŸš€ ç®¡ç†å‘˜ç³»ç»Ÿå¿«é€Ÿå¯åŠ¨æŒ‡å—

## â±ï¸ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### æ­¥éª¤ 1: é…ç½®ç¯å¢ƒå˜é‡ï¼ˆ2åˆ†é’Ÿï¼‰

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ï¼š

```bash
cd /www/wwwroot/jiuguanmama/mySillyTavern
nano .env  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨
```

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```bash
# ç®¡ç†å‘˜å¯†ç ï¼ˆä¿®æ”¹ä¸ºä½ è‡ªå·±çš„å¯†ç ï¼ï¼‰
ADMIN_PASSWORD=your-secure-password-here

# Sessionå¯†é’¥ï¼ˆç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼‰
SESSION_SECRET=your-random-secret-key-here

# æ•°æ®åº“è¿æ¥ï¼ˆå¦‚æœå·²æœ‰åˆ™è·³è¿‡ï¼‰
DATABASE_URL="postgresql://user:password@localhost:5432/database"
```

**ç”ŸæˆéšæœºSessionå¯†é’¥ï¼š**

```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

### æ­¥éª¤ 2: è¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
cd /www/wwwroot/jiuguanmama/mySillyTavern/packages/database

# æ–¹å¼1ï¼šä½¿ç”¨Prismaï¼ˆæ¨èï¼‰
npx prisma db push

# æ–¹å¼2ï¼šæ‰‹åŠ¨æ‰§è¡ŒSQL
psql -U your_user -d your_database -f prisma/migrations/20251101_add_category_and_sort/migration.sql
```

### æ­¥éª¤ 3: é‡æ–°æ„å»ºåº”ç”¨ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
cd /www/wwwroot/jiuguanmama/mySillyTavern

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
pnpm install

# æ„å»º
pnpm build

# é‡å¯æœåŠ¡
pm2 restart sillytavern

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤å¯åŠ¨æˆåŠŸ
pm2 logs sillytavern
```

## âœ… éªŒè¯å®‰è£…

### 1. è®¿é—®ç®¡ç†ç™»å½•é¡µ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

```
https://your-domain.com/admin/characters/login
```

### 2. è¾“å…¥ç®¡ç†å‘˜å¯†ç 

- è¾“å…¥ä½ åœ¨ç¯å¢ƒå˜é‡ä¸­é…ç½®çš„ `ADMIN_PASSWORD`
- ç¡®ä¿ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘16ä¸ªå­—ç¬¦ï¼ŒåŒ…å«å¤§å°å†™ã€æ•°å­—ã€ç¬¦å·ï¼‰

### 3. è¿›å…¥ç®¡ç†ç•Œé¢

ç™»å½•æˆåŠŸåï¼Œä½ åº”è¯¥çœ‹åˆ°ä¸‰ä¸ªTabï¼š
- âš™ï¸ **è®¾ç½®**ï¼šé…ç½®LLM
- âœ¨ **LLMç”Ÿæˆ**ï¼šç”Ÿæˆè§’è‰²å¡
- ğŸ“‹ **è§’è‰²ç®¡ç†**ï¼šç®¡ç†æ‰€æœ‰è§’è‰²

## ğŸ¯ é¦–æ¬¡ä½¿ç”¨æµç¨‹

### 1. é…ç½®LLMï¼ˆå¿…éœ€ï¼‰

1. ç‚¹å‡» **"è®¾ç½®"** Tab
2. å¡«å†™è¡¨å•ï¼š
   ```
   é…ç½®åç§°ï¼šæˆ‘çš„GPT-4
   Providerï¼šopenai
   Modelï¼šgpt-4
   API Keyï¼šsk-xxxxxxxxxxxxxxx
   Base URLï¼šhttps://api.openai.com/v1ï¼ˆå¯é€‰ï¼‰
   Temperatureï¼š0.8
   Max Tokensï¼š2000
   ```
3. ç‚¹å‡» **"ä¿å­˜é…ç½®"**

### 2. ç”Ÿæˆç¬¬ä¸€ä¸ªè§’è‰²

1. ç‚¹å‡» **"LLMç”Ÿæˆ"** Tab
2. è¾“å…¥è§’è‰²æè¿°ï¼š
   ```
   ä¸€ä¸ªæ¸©æŸ”å¯çˆ±çš„çŒ«å¨˜ï¼Œå–œæ¬¢æ’’å¨‡ï¼Œæ€§æ ¼æ¸©é¡ºä¹–å·§
   ```
3. é€‰æ‹©åˆ†ç±»ï¼š**å¯çˆ±**
4. é€‰æ‹©æ ‡ç­¾ï¼š**æ¸©æŸ”ã€çŒ«å¨˜ã€å¯çˆ±**
5. é€‰æ‹©LLMé…ç½®ï¼š**æˆ‘çš„GPT-4**
6. ç‚¹å‡» **"ç”Ÿæˆè§’è‰²å¡"**
7. ç­‰å¾…10-30ç§’
8. é¢„è§ˆç”Ÿæˆç»“æœ
9. ç‚¹å‡» **"å‘å¸ƒåˆ°ç¤¾åŒº"**

### 3. æŸ¥çœ‹ç¤¾åŒº

è®¿é—®ï¼š`https://your-domain.com/characters/community`

ä½ åº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰å‘å¸ƒçš„è§’è‰²ï¼

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å¿˜è®°ç®¡ç†å‘˜å¯†ç æ€ä¹ˆåŠï¼Ÿ

**A:** ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `ADMIN_PASSWORD`ï¼Œç„¶åé‡å¯åº”ç”¨ã€‚

```bash
nano /www/wwwroot/jiuguanmama/mySillyTavern/.env
# ä¿®æ”¹ ADMIN_PASSWORD=new-password
pm2 restart sillytavern
```

### Q: æç¤º"æœªæ‰¾åˆ°LLMé…ç½®"

**A:** ä½ éœ€è¦å…ˆåœ¨"è®¾ç½®"Tabä¸­æ·»åŠ è‡³å°‘ä¸€ä¸ªLLMé…ç½®ã€‚

### Q: ç”Ÿæˆå¤±è´¥ï¼Œè¿”å›JSONè§£æé”™è¯¯

**A:** å¯èƒ½çš„åŸå› ï¼š
1. API Keyæ— æ•ˆæˆ–é…é¢ç”¨å®Œ
2. æ¨¡å‹ä¸æ”¯æŒJSONæ ¼å¼è¾“å‡º
3. Temperatureè®¾ç½®è¿‡é«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥API Keyæ˜¯å¦æœ‰æ•ˆ
- å°è¯•é™ä½Temperatureåˆ°0.7
- ä½¿ç”¨æ”¯æŒJSONçš„æ¨¡å‹ï¼ˆå¦‚gpt-4ã€claude-3ï¼‰

### Q: æ•°æ®åº“è¿ç§»å¤±è´¥

**A:** æ‰‹åŠ¨æ‰§è¡ŒSQLï¼š

```bash
cd /www/wwwroot/jiuguanmama/mySillyTavern/packages/database

# æŸ¥çœ‹è¿ç§»æ–‡ä»¶å†…å®¹
cat prisma/migrations/20251101_add_category_and_sort/migration.sql

# æ‰‹åŠ¨æ‰§è¡Œ
psql -U your_user -d your_database -f prisma/migrations/20251101_add_category_and_sort/migration.sql
```

### Q: ç¤¾åŒºé¡µé¢çœ‹ä¸åˆ°ç”Ÿæˆçš„è§’è‰²

**A:** æ£€æŸ¥ï¼š
1. æ˜¯å¦ç‚¹å‡»äº†"å‘å¸ƒåˆ°ç¤¾åŒº"
2. åˆ·æ–°ç¤¾åŒºé¡µé¢
3. æ£€æŸ¥è§’è‰²åç§°æ˜¯å¦é‡å¤ï¼ˆä¸èƒ½é‡å¤å‘å¸ƒï¼‰

## ğŸ“± è®¿é—®è·¯å¾„

| åŠŸèƒ½ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| ç®¡ç†ç™»å½• | `/admin/characters/login` | é¦–æ¬¡è®¿é—®éœ€ç™»å½• |
| ç®¡ç†ä¸»é¡µ | `/admin/characters` | ç™»å½•åè‡ªåŠ¨è·³è½¬ |
| ç¤¾åŒºé¡µé¢ | `/characters/community` | æŸ¥çœ‹å·²å‘å¸ƒè§’è‰² |
| ç”¨æˆ·é¡µé¢ | `/characters` | ç”¨æˆ·è‡ªå·±çš„è§’è‰² |

## ğŸ¨ LLMé…ç½®å»ºè®®

### OpenAIï¼ˆæ¨èï¼‰

```
Provider: openai
Model: gpt-4 æˆ– gpt-3.5-turbo
Temperature: 0.8
Max Tokens: 2000
```

### Anthropic Claude

```
Provider: anthropic
Model: claude-3-opus-20240229
Temperature: 0.8
Max Tokens: 2000
```

### Google Gemini

```
Provider: google
Model: gemini-pro
Temperature: 0.8
Max Tokens: 2000
```

### è‡ªå®šä¹‰ï¼ˆå…¼å®¹OpenAI APIï¼‰

```
Provider: openai
Model: ä½ çš„æ¨¡å‹åç§°
Base URL: https://your-api-endpoint.com/v1
Temperature: 0.8
Max Tokens: 2000
```

## ğŸ’¡ ç”ŸæˆæŠ€å·§

### å¥½çš„æè¿°ç¤ºä¾‹

âœ… **å…·ä½“è¯¦ç»†**ï¼š
```
ä¸€ä¸ªæ¸©æŸ”å¯çˆ±çš„çŒ«å¨˜ï¼Œæœ‰ç€æŸ”è½¯çš„çŒ«è€³å’Œæ¯›èŒ¸èŒ¸çš„å°¾å·´ï¼Œ
å–œæ¬¢æ’’å¨‡å’Œé™ªä¼´ä¸»äººï¼Œæ€§æ ¼æ¸©é¡ºä¹–å·§ä½†å¶å°”ä¼šæœ‰ç‚¹å°å‚²å¨‡
```

âœ… **åŒ…å«å…³é”®ç‰¹å¾**ï¼š
```
å†·é™ç†æ™ºçš„æ·±æµ·å®ˆæŠ¤è€…ï¼Œæ‹¥æœ‰æ§åˆ¶æµ·æ´‹çš„èƒ½åŠ›ï¼Œå¤–è¡¨å†·é…·
ä½†å¯¹ä¿¡ä»»çš„äººä¼šå±•ç°æ¸©æŸ”çš„ä¸€é¢
```

âŒ **å¤ªç®€å•**ï¼š
```
ä¸€ä¸ªè§’è‰²
```

âŒ **å¤ªæ¨¡ç³Š**ï¼š
```
ä¸€ä¸ªäºº
```

### åˆ†ç±»å’Œæ ‡ç­¾å»ºè®®

| åˆ†ç±» | é€‚åˆçš„æ ‡ç­¾ |
|------|-----------|
| å¯çˆ± | æ¸©æŸ”ã€æ²»æ„ˆã€èŒã€ç”œç¾ã€è½¯ç³¯ |
| å†·é…· | é«˜å†·ã€éœ¸æ°”ã€å¼ºå¤§ã€ç†æ™ºã€å†·é™ |
| æ™ºæ…§ | åšå­¦ã€ç¿æ™ºã€å¯¼å¸ˆã€å­¦è€…ã€èªæ˜ |
| å†å² | å¤ä»£ã€å†å²äººç‰©ã€ä¼ ç»Ÿã€æ–‡åŒ– |
| å¥‡å¹» | é­”æ³•ã€å†’é™©ã€ç²¾çµã€é­”æ³•å¸ˆ |
| ç§‘å¹» | æœªæ¥ã€AIã€æœºå™¨äººã€å¤ªç©ºã€ç§‘æŠ€ |

## ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

### æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ

```bash
pm2 list
# åº”è¯¥çœ‹åˆ° sillytavern çŠ¶æ€ä¸º online
```

### æ£€æŸ¥æ—¥å¿—

```bash
pm2 logs sillytavern --lines 100
```

### æ£€æŸ¥æ•°æ®åº“

```bash
cd /www/wwwroot/jiuguanmama/mySillyTavern/packages/database
npx prisma studio
# æ‰“å¼€ http://localhost:5555 æŸ¥çœ‹æ•°æ®åº“
```

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ å¯ä»¥ï¼š

- âœ… é€šè¿‡LLMå¿«é€Ÿç”Ÿæˆè§’è‰²å¡
- âœ… ä¸ºè§’è‰²è®¾ç½®åˆ†ç±»å’Œæ ‡ç­¾
- âœ… ä¸€é”®å‘å¸ƒåˆ°ç¤¾åŒº
- âœ… ç»Ÿä¸€ç®¡ç†æ‰€æœ‰è§’è‰²

**å¼€å§‹ä½¿ç”¨ï¼š** è®¿é—® `/admin/characters` å¹¶ç™»å½•ï¼

---

## ğŸ“š æ›´å¤šæ–‡æ¡£

- å®Œæ•´ä½¿ç”¨æŒ‡å—ï¼š[ADMIN_CHARACTER_SYSTEM.md](./ADMIN_CHARACTER_SYSTEM.md)
- é¡¹ç›®ä¸»æ–‡æ¡£ï¼š[README.md](./README.md)

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹æ—¥å¿—æˆ–æ£€æŸ¥é…ç½®æ–‡ä»¶ã€‚

