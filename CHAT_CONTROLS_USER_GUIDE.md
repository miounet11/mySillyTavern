# 聊天控制功能使用指南

## 功能概览

在聊天界面的消息输入框上方，您会看到一个新的控制栏，包含以下功能：

```
┌─────────────────────────────────────────────────────────┐
│  [🔵 流式输出]  [⚡ 快速模式]      [🔄 重新生成]  [⬇ 跳转底部]  │
└─────────────────────────────────────────────────────────┘
```

## 详细功能说明

### 1️⃣ 流式输出 (Radio 图标)

**作用**: 控制 AI 回复的显示方式

- **开启时** (蓝色高亮):
  - AI 的回复会像打字一样逐句出现
  - 可以更快地看到回复的开始部分
  - 适合长回复，减少等待感

- **关闭时** (灰色):
  - AI 的回复会在生成完成后一次性显示
  - 适合需要完整阅读的场景

**如何使用**: 点击按钮即可切换，您的选择会自动保存

### 2️⃣ 快速模式 (闪电图标)

**作用**: 调整 AI 的回复风格

- **开启时** (琥珀色高亮):
  - AI 会给出更简洁、直接的回答
  - 回复更可预测，减少创意性
  - 技术细节: Temperature = 0.3
  - 适合需要准确、一致答案的场景

- **关闭时** (灰色):
  - AI 使用默认设置
  - 回复更有创意和多样性
  - 适合创意写作、角色扮演

**如何使用**: 点击按钮即可切换，您的选择会自动保存

**使用场景建议**:
- ✅ 快速模式适合: 问答、翻译、总结、技术问题
- ✅ 普通模式适合: 创意写作、角色扮演、开放式对话

### 3️⃣ 重新生成 (旋转箭头图标)

**作用**: 重新生成 AI 的最后一条回复

**使用场景**:
- 对当前回复不满意
- 想要不同的回答角度
- AI 的回复出现错误或不完整

**如何使用**:
1. 点击按钮
2. AI 会删除上一条回复
3. 使用相同的上下文生成新的回复

**注意**: 
- 只有在有 AI 回复的情况下才能使用
- 会尊重当前的"流式输出"和"快速模式"设置

### 4️⃣ 跳转底部 (下箭头图标)

**作用**: 快速滚动到对话的最底部

**使用场景**:
- 浏览了历史消息，想快速回到最新位置
- 对话很长，手动滚动太慢

**如何使用**: 点击按钮，页面会平滑滚动到最新消息

## 视觉指示

### 按钮状态

**激活状态**:
- 流式输出开启: 🔵 蓝色背景 + 脉冲动画
- 快速模式开启: 🟡 琥珀色背景 + 脉冲动画

**未激活状态**:
- ⚪ 灰色，鼠标悬停时高亮

**禁用状态**:
- 按钮变暗，无法点击
- 通常在 AI 正在生成回复时

### 生成中提示

当 AI 正在生成回复时，您会看到：

**流式模式下**:
```
┌─────────────────────┐
│ AI 正在输入...      │
│ ••• 正在生成中...   │
└─────────────────────┘
```

**非流式模式下**:
```
┌─────────────────────┐
│  ⏳ 正在生成回复... │
└─────────────────────┘
```

## 最佳实践

### 推荐组合

1. **日常对话**
   - ✅ 流式输出: 开启
   - ✅ 快速模式: 关闭
   - 💡 体验最流畅的对话

2. **快速问答**
   - ✅ 流式输出: 开启
   - ✅ 快速模式: 开启
   - 💡 最快获得简洁答案

3. **创意写作**
   - ✅ 流式输出: 开启
   - ✅ 快速模式: 关闭
   - 💡 充分发挥 AI 的创造力

4. **文档处理**
   - ✅ 流式输出: 关闭
   - ✅ 快速模式: 开启
   - 💡 获得完整、准确的输出

### 性能提示

- 流式输出在网络较慢时可能会有延迟
- 快速模式可以减少 token 使用，节省成本
- 如果觉得 AI 回复太慢，尝试开启快速模式

## 移动端适配

在手机或小屏幕设备上：
- 按钮文本会简化（"流式输出" → "流式"）
- 状态指示器会隐藏以节省空间
- 所有功能保持完整可用

## 故障排除

**Q: 切换设置后没有立即生效？**
- A: 设置会在下一条消息生成时生效，不影响正在生成的消息

**Q: 刷新页面后设置丢失？**
- A: 设置会自动保存到浏览器，如果丢失，请检查浏览器的 localStorage 是否被禁用

**Q: 流式输出显示不流畅？**
- A: 可能是网络延迟，尝试关闭流式输出或检查网络连接

**Q: 快速模式下回复还是很慢？**
- A: 快速模式只是调整 AI 的输出风格，不影响网络速度和 API 响应时间

## 键盘快捷键（计划中）

未来版本可能支持：
- `Ctrl + Shift + S`: 切换流式输出
- `Ctrl + Shift + F`: 切换快速模式
- `Ctrl + End`: 跳转到底部
- `Ctrl + R`: 重新生成

## 反馈与建议

如果您有任何问题或建议，欢迎反馈！

