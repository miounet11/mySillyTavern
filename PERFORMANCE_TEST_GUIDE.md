# 性能优化测试指南

## 快速验证步骤

### 1. 基础功能测试（5分钟）

打开角色页面 `https://www.isillytavern.com/characters`，验证：

✅ **页面加载**
- 页面正常加载
- 角色卡片正常显示
- 搜索功能正常
- 创建/导入按钮正常

✅ **交互功能**
- 鼠标悬停卡片有过渡效果（稍微上移）
- 点击卡片可以进入对话
- 编辑/删除/导出功能正常
- 社区角色页面正常

### 2. 性能测试（10分钟）

#### A. CPU/GPU 使用率测试

**测试前准备**：
- 打开系统监视器/活动监视器/任务管理器
- 记录打开页面前的 CPU/GPU 使用率

**测试步骤**：
1. 打开角色页面，保持5分钟不动
2. 观察 CPU/GPU 使用率
3. 鼠标在页面上移动
4. 悬停在多个角色卡片上

**预期结果**：
- 静止时：CPU < 5%，GPU < 5%
- 移动时：CPU 10-20%，GPU 15-25%
- 无持续的高占用

#### B. 发热测试

**测试步骤**：
1. 打开角色页面
2. 保持10分钟
3. 触摸设备背面/底部

**预期结果**：
- 笔记本：几乎不发热或轻微温热
- 手机：不明显发热
- 风扇：不启动或低速运转

#### C. 电池消耗测试（笔记本）

**测试步骤**：
1. 拔掉电源，记录电池百分比
2. 打开角色页面，保持30分钟
3. 记录电池百分比变化

**预期结果**：
- 30分钟消耗 < 3-5%
- 与浏览其他普通网页相当

### 3. 动画效果测试（5分钟）

#### A. 正常模式

**测试步骤**：
1. 悬停角色卡片
2. 观察过渡动画

**预期效果**：
- 卡片轻微上移（4px）
- 图片轻微放大（1.05倍）
- 过渡平滑流畅
- 悬停操作按钮出现

#### B. 减少动画模式

**系统设置**（根据操作系统）：
- **Windows**: 设置 → 辅助功能 → 视觉效果 → 动画效果（关闭）
- **macOS**: 系统偏好设置 → 辅助功能 → 显示 → 减少动画
- **Linux**: 设置 → 辅助功能 → 减少动画

**测试步骤**：
1. 启用系统"减少动画"设置
2. 刷新页面
3. 悬停角色卡片

**预期效果**：
- 几乎无动画效果
- 背景星空完全静止或消失
- 无 blur 效果
- CPU/GPU 使用率更低

### 4. 低端设备测试（可选）

**测试设备**：
- 旧手机（3年以上）
- 低配笔记本（4GB RAM）
- 平板电脑

**测试步骤**：
1. 打开角色页面
2. 滚动列表
3. 悬停/点击卡片
4. 长时间使用（15-30分钟）

**预期结果**：
- 页面流畅加载
- 滚动流畅
- 交互响应迅速
- 可以长时间使用不卡顿

## 性能对比（优化前后）

### 优化前的问题
❌ 打开页面后笔记本发热明显  
❌ CPU/GPU 持续高占用（30-60%）  
❌ 电池消耗大幅增加（30-40%）  
❌ 风扇高速运转  
❌ 低端设备卡顿  
❌ 手机发烫  

### 优化后的表现
✅ 打开页面后几乎不发热  
✅ CPU/GPU 空闲时 < 5%  
✅ 电池消耗正常（< 5%）  
✅ 风扇不转或低速  
✅ 低端设备流畅  
✅ 手机正常温度  

## 使用 Chrome DevTools 测试

### Performance 面板测试

1. 打开 Chrome DevTools（F12）
2. 切换到 Performance 面板
3. 点击录制按钮
4. 在页面上操作30秒
5. 停止录制
6. 查看分析结果

**关键指标**：
- **FPS**: 应该稳定在 55-60
- **CPU**: 空闲时应该很少活动
- **Main**: 主线程应该有大量空白时间
- **GPU**: 不应该有持续的绘制活动

### Layers 面板测试

1. 打开 DevTools → More tools → Layers
2. 查看合成层
3. 悬停卡片观察层的变化

**预期**：
- 角色卡片应该有独立的合成层
- 动画不应该触发整页重绘

## 浏览器兼容性测试

测试以下浏览器：
- ✅ Chrome/Edge (Chromium)
- ✅ Firefox
- ✅ Safari
- ✅ 移动浏览器

## 问题反馈

如果发现任何性能问题，请记录：
1. **设备信息**: 型号、CPU、内存
2. **浏览器**: 类型和版本
3. **操作系统**: 类型和版本
4. **具体问题**: CPU占用率、发热位置、卡顿场景
5. **截图**: Performance 面板截图

## 回滚方案

如果需要回滚优化（不推荐），可以：
1. 恢复 `globals.css` 中的动画
2. 恢复 blur 效果强度
3. 移除 `contain` 和 `will-change` 属性

但这会导致性能问题重现。
